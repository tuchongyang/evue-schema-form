(function(e,o){"object"===typeof exports&&"object"===typeof module?module.exports=o(require("vue")):"function"===typeof define&&define.amd?define([],o):"object"===typeof exports?exports["evue-schema-form"]=o(require("vue")):e["evue-schema-form"]=o(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(){"use strict";var o={769:function(e,o){o.Z=(e,o)=>{const t=e.__vccOpts||e;for(const[l,r]of o)t[l]=r;return t}},203:function(o){o.exports=e}},t={};function l(e){var r=t[e];if(void 0!==r)return r.exports;var n=t[e]={exports:{}};return o[e](n,n.exports,l),n.exports}!function(){l.d=function(e,o){for(var t in o)l.o(o,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})}}(),function(){l.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.p=""}();var r={};return function(){if(l.r(r),l.d(r,{SchemaForm:function(){return me}}),"undefined"!==typeof window){var e=window.document.currentScript,o=e&&e.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(l.p=o[1])}var t=l(203);function n(e,o,l,r,n,m){const a=(0,t.resolveComponent)("el-form-item"),d=(0,t.resolveComponent)("el-form");return(0,t.openBlock)(),(0,t.createBlock)(d,(0,t.mergeProps)({ref:"schemaFormRef",model:e.modelRef,rules:e.rulesRef},e.$attrs,{class:"schema-form",style:{display:"flex","flex-wrap":"wrap",position:"relative","box-sizing":"border-box"}}),{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.schemaItems,(o=>((0,t.openBlock)(),(0,t.createBlock)(a,{key:o.field,label:o.label,prop:o.prop,"label-width":o.labelWidth,style:(0,t.normalizeStyle)({maxWidth:100*o.span/24+"%",flex:"0 0 "+100*o.span/24+"%"})},{default:(0,t.withCtx)((()=>[((0,t.openBlock)(),(0,t.createBlock)((0,t.resolveDynamicComponent)(e.getComponent(o.type)),{modelValue:e.modelRef[o.prop],"onUpdate:modelValue":t=>e.modelRef[o.prop]=t,"form-item":o},null,8,["modelValue","onUpdate:modelValue","form-item"]))])),_:2},1032,["label","prop","label-width","style"])))),128)),e.$slots["operate-button"]?((0,t.openBlock)(),(0,t.createBlock)(a,{key:0},{default:(0,t.withCtx)((()=>[(0,t.renderSlot)(e.$slots,"operate-button",{},void 0,!0)])),_:3})):(0,t.createCommentVNode)("",!0)])),_:3},16,["model","rules"])}const m=Object.prototype.toString;function a(e,o){return m.call(e)===`[object ${o}]`}function d(e){return a(e,"Function")}function c(e){return a(e,"AsyncFunction")}function p(e,o,l,r,n,m){const a=(0,t.resolveComponent)("el-checkbox"),d=(0,t.resolveComponent)("el-col"),c=(0,t.resolveComponent)("el-row"),p=(0,t.resolveComponent)("el-checkbox-group");return(0,t.openBlock)(),(0,t.createBlock)(p,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o),style:{width:"100%"}},(0,t.toHandlers)(e.formItem.eventObject)),{default:(0,t.withCtx)((()=>[(0,t.createVNode)(c,null,{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.formItem.options,(e=>((0,t.openBlock)(),(0,t.createBlock)(d,{key:e.value,span:8},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(a,{value:e.value},{default:(0,t.withCtx)((()=>[(0,t.createTextVNode)((0,t.toDisplayString)(e.label),1)])),_:2},1032,["value"])])),_:2},1024)))),128))])),_:1})])),_:1},16,["modelValue"])}var u=(0,t.defineComponent)({name:"SchemaFormCheckbox",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}}),s=l(769);const i=(0,s.Z)(u,[["render",p]]);var f=i;function v(e,o,l,r,n,m){const a=(0,t.resolveComponent)("el-input-number");return(0,t.openBlock)(),(0,t.createBlock)(a,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o)},e.formItem.props,(0,t.toHandlers)(e.formItem.eventObject),{style:{width:"100%"}}),null,16,["modelValue"])}var h=(0,t.defineComponent)({name:"SchemaFormInputNumber",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const V=(0,s.Z)(h,[["render",v]]);var b=V;function I(e,o,l,r,n,m){const a=(0,t.resolveComponent)("el-input");return(0,t.openBlock)(),(0,t.createBlock)(a,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o),disabled:e.formItem.disabled||!1},e.formItem.props,{placeholder:e.formItem.props&&e.formItem.props.placeholder||"请输入"+e.formItem.label,autocomplete:"new-password"},(0,t.toHandlers)(e.formItem.eventObject)),null,16,["modelValue","disabled","placeholder"])}var y=(0,t.defineComponent)({name:"SchemaFormInput",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const k=(0,s.Z)(y,[["render",I]]);var g=k;function C(e,o,l,r,n,m){const a=(0,t.resolveComponent)("el-radio"),d=(0,t.resolveComponent)("el-radio-group");return(0,t.openBlock)(),(0,t.createBlock)(d,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o)},(0,t.toHandlers)(e.formItem.eventObject)),{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.formItem.options,(e=>((0,t.openBlock)(),(0,t.createBlock)(a,{key:e.value,label:e.value},{default:(0,t.withCtx)((()=>[(0,t.createTextVNode)((0,t.toDisplayString)(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},16,["modelValue"])}var S=(0,t.defineComponent)({name:"SchemaFormRadio",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const B=(0,s.Z)(S,[["render",C]]);var w=B;function O(e,o,l,r,n,m){const a=(0,t.resolveComponent)("el-option"),d=(0,t.resolveComponent)("el-select");return(0,t.openBlock)(),(0,t.createBlock)(d,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o),mode:e.formItem.mode||""},e.formItem.props,(0,t.toHandlers)(e.formItem.eventObject),{style:{width:"100%"}}),{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.formItem.options,(e=>((0,t.openBlock)(),(0,t.createBlock)(a,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:1},16,["modelValue","mode"])}var x=(0,t.defineComponent)({name:"SchemaFormSelect",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const j=(0,s.Z)(x,[["render",O]]);var F=j;function U(e,o,l,r,n,m){const a=(0,t.resolveComponent)("el-switch");return(0,t.openBlock)(),(0,t.createBlock)(a,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o)},e.formItem.props,(0,t.toHandlers)(e.formItem.eventObject)),null,16,["modelValue"])}var P=(0,t.defineComponent)({name:"SchemaFormTextarea",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const _=(0,s.Z)(P,[["render",U]]);var Z=_;const R=["src"];function H(e,o,l,r,n,m){const a=(0,t.resolveComponent)("el-upload");return(0,t.openBlock)(),(0,t.createBlock)(a,{"file-list":e.fileList,"onUpdate:file-list":o[0]||(o[0]=o=>e.fileList=o),name:"avatar","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,action:e.uploadUrl,"before-upload":e.beforeUpload,headers:e.headers,"on-success":e.handleAvatarSuccess,onChange:e.handleChange},{default:(0,t.withCtx)((()=>[e.imageUrl?((0,t.openBlock)(),(0,t.createElementBlock)("img",{key:0,src:e.imageUrl,alt:"avatar"},null,8,R)):(0,t.createCommentVNode)("",!0)])),_:1},8,["file-list","action","before-upload","headers","on-success","onChange"])}var L=(0,t.defineComponent)({name:"SchemaFormFile",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)}),r=(0,t.ref)([]),n=(0,t.ref)(!1),m=(0,t.ref)(""),a=e.formItem.action||"#",d={authorization:localStorage.getItem("token")},c=o=>{e.formItem.change&&e.formItem.change(o.raw)},p=(o,t)=>{e.formItem.success&&e.formItem.success(o,t)},u=o=>{const t=!e.formItem.fileType||o.type.indexOf(e.formItem.fileType)>-1,l=o.size-e.formItem.maxsize;return t&&l&&e.formItem.beforeUpload&&e.formItem.beforeUpload(t,l),t&&l};return{model:l,fileList:r,loading:n,imageUrl:m,uploadUrl:a,handleChange:c,beforeUpload:u,handleAvatarSuccess:p,headers:d}}});const N=(0,s.Z)(L,[["render",H],["__scopeId","data-v-b5c6635e"]]);var T=N;function D(e,o,l,r,n,m){const a=(0,t.resolveComponent)("el-input");return(0,t.openBlock)(),(0,t.createBlock)(a,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o),type:"password"},e.formItem.props,{placeholder:e.formItem.props&&e.formItem.props.placeholder||"请输入"+e.formItem.label,autocomplete:"new-password"},(0,t.toHandlers)(e.formItem.eventObject)),null,16,["modelValue","placeholder"])}var M=(0,t.defineComponent)({name:"SchemaFormInputPassword",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const Y=(0,s.Z)(M,[["render",D]]);var E=Y;function z(e,o,l,r,n,m){const a=(0,t.resolveComponent)("el-date-picker");return(0,t.openBlock)(),(0,t.createBlock)(a,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},e.formItem.props,{disabled:e.formItem.disabled||!1,placeholder:e.formItem.props&&e.formItem.props.placeholder||"请选择"+e.formItem.label},(0,t.toHandlers)(e.formItem.eventObject),{style:{width:"100%"}}),null,16,["modelValue","disabled","placeholder"])}var $=(0,t.defineComponent)({name:"SchemaFormInput",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const q=(0,s.Z)($,[["render",z]]);var A=q;function W(e,o,l,r,n,m){const a=(0,t.resolveComponent)("el-color-picker");return(0,t.openBlock)(),(0,t.createBlock)(a,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o),"show-alpha":""},e.formItem.props,(0,t.toHandlers)(e.formItem.eventObject)),null,16,["modelValue"])}var G=(0,t.defineComponent)({name:"SchemaFormInput",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const J=(0,s.Z)(G,[["render",W]]);var K=J;const Q=["innerHTML"];function X(e,o,l,r,n,m){return(0,t.openBlock)(),(0,t.createElementBlock)("div",{innerHTML:e.model},null,8,Q)}var ee=(0,t.defineComponent)({name:"SchemaFormInput",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const oe=(0,s.Z)(ee,[["render",X]]);var te=oe,le={SchemaFormCheckbox:f,SchemaFormInputNumber:b,SchemaFormInput:g,SchemaFormRadio:w,SchemaFormSelect:F,SchemaFormSwitch:Z,SchemaFormFile:T,SchemaFormInputPassword:E,SchemaFormDatePicker:A,SchemaFormColorPicker:K,SchemaFormValue:te},re=(0,t.defineComponent)({name:"SchemaForm",components:{...le},props:{formSchema:{required:!0,type:Object},fields:{type:Object,default:()=>({})}},setup(e){const o=(0,t.ref)(),l=(0,t.getCurrentInstance)(),r=(0,t.reactive)(e.formSchema.formItem.reduce(((e,o)=>(o.eventObject??={},e[o.prop]=o.value||void 0,e)),{}));e.fields&&Object.assign(r,e.fields),e.formSchema.formItem.forEach((async e=>{Object.prototype.hasOwnProperty.call(e,"loading")&&(e.loading=!0),d(e.asyncOptions)||c(e.asyncOptions)?e.options=await e.asyncOptions(e,l).finally((()=>e.loading=!1)):(d(e.asyncValue)||c(e.asyncValue))&&(r[e.field]=await e.asyncValue(e,l).finally((()=>e.loading=!1)))}));const n=(0,t.computed)((()=>e.formSchema.formItem.filter((e=>!e.hidden||(e.hidden instanceof Function?!e.hidden(r):e.hidden))))),m=(0,t.computed)((()=>e.formSchema.rules&&n.value.reduce(((o,t)=>(o[t.prop]=e.formSchema.rules[t.prop],o)),{})||{})),a=["input","select","radio","checkbox","input-number","input-range","switch","file","input-password","date-picker","color-picker","value"],p=e=>a.includes(e)?"schema-form-"+e:(0,t.isReactive)(e)||(0,t.isRef)(e)?(0,t.createVNode)(e):e,u=e=>o.value.validate(e);return{modelRef:r,schemaFormRef:o,rulesRef:m,getComponent:p,schemaItems:n,validate:u}}});const ne=(0,s.Z)(re,[["render",n],["__scopeId","data-v-1d21bd02"]]);var me=ne}(),r}()}));