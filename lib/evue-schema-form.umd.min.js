(function(e,o){"object"===typeof exports&&"object"===typeof module?module.exports=o(require("vue")):"function"===typeof define&&define.amd?define([],o):"object"===typeof exports?exports["evue-schema-form"]=o(require("vue")):e["evue-schema-form"]=o(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(){"use strict";var o={769:function(e,o){o.Z=(e,o)=>{const t=e.__vccOpts||e;for(const[l,n]of o)t[l]=n;return t}},203:function(o){o.exports=e}},t={};function l(e){var n=t[e];if(void 0!==n)return n.exports;var r=t[e]={exports:{}};return o[e](r,r.exports,l),r.exports}!function(){l.d=function(e,o){for(var t in o)l.o(o,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})}}(),function(){l.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.p=""}();var n={};return function(){if(l.r(n),l.d(n,{FormDialog:function(){return ve},SchemaForm:function(){return re}}),"undefined"!==typeof window){var e=window.document.currentScript,o=e&&e.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(l.p=o[1])}var t=l(203);function r(e,o,l,n,r,a){const m=(0,t.resolveComponent)("el-form-item"),d=(0,t.resolveComponent)("el-form");return(0,t.openBlock)(),(0,t.createBlock)(d,(0,t.mergeProps)({ref:"schemaFormRef",model:e.modelRef,rules:e.rulesRef},e.$attrs,{class:"schema-form",style:{display:"flex","flex-wrap":"wrap",position:"relative","box-sizing":"border-box"}}),{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.schemaItems,(o=>((0,t.openBlock)(),(0,t.createBlock)(m,{key:o.field,label:o.label,prop:o.prop,"label-width":o.labelWidth,style:(0,t.normalizeStyle)({maxWidth:100*o.span/24+"%",flex:"0 0 "+100*o.span/24+"%"})},{default:(0,t.withCtx)((()=>[((0,t.openBlock)(),(0,t.createBlock)((0,t.resolveDynamicComponent)(e.getComponent(o.type)),{modelValue:e.modelRef[o.prop],"onUpdate:modelValue":t=>e.modelRef[o.prop]=t,"form-item":o},null,8,["modelValue","onUpdate:modelValue","form-item"]))])),_:2},1032,["label","prop","label-width","style"])))),128)),e.$slots["operate-button"]?((0,t.openBlock)(),(0,t.createBlock)(m,{key:0},{default:(0,t.withCtx)((()=>[(0,t.renderSlot)(e.$slots,"operate-button",{},void 0,!0)])),_:3})):(0,t.createCommentVNode)("",!0)])),_:3},16,["model","rules"])}const a=Object.prototype.toString;function m(e,o){return a.call(e)===`[object ${o}]`}function d(e){return m(e,"Function")}function c(e){return m(e,"AsyncFunction")}function p(e,o,l,n,r,a){const m=(0,t.resolveComponent)("el-checkbox"),d=(0,t.resolveComponent)("el-col"),c=(0,t.resolveComponent)("el-row"),p=(0,t.resolveComponent)("el-checkbox-group");return(0,t.openBlock)(),(0,t.createBlock)(p,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o),style:{width:"100%"}},(0,t.toHandlers)(e.formItem.eventObject)),{default:(0,t.withCtx)((()=>[(0,t.createVNode)(c,null,{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.formItem.options,(e=>((0,t.openBlock)(),(0,t.createBlock)(d,{key:e.value,span:8},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(m,{value:e.value},{default:(0,t.withCtx)((()=>[(0,t.createTextVNode)((0,t.toDisplayString)(e.label),1)])),_:2},1032,["value"])])),_:2},1024)))),128))])),_:1})])),_:1},16,["modelValue"])}var u=(0,t.defineComponent)({name:"SchemaFormCheckbox",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}}),s=l(769);const i=(0,s.Z)(u,[["render",p]]);var f=i;function v(e,o,l,n,r,a){const m=(0,t.resolveComponent)("el-input-number");return(0,t.openBlock)(),(0,t.createBlock)(m,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o)},e.formItem.props,(0,t.toHandlers)(e.formItem.eventObject),{style:{width:"100%"}}),null,16,["modelValue"])}var h=(0,t.defineComponent)({name:"SchemaFormInputNumber",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const V=(0,s.Z)(h,[["render",v]]);var b=V;function y(e,o,l,n,r,a){const m=(0,t.resolveComponent)("el-input");return(0,t.openBlock)(),(0,t.createBlock)(m,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o),disabled:e.formItem.disabled||!1},e.formItem.props,{placeholder:e.formItem.props&&e.formItem.props.placeholder||"请输入"+e.formItem.label,autocomplete:"new-password"},(0,t.toHandlers)(e.formItem.eventObject)),null,16,["modelValue","disabled","placeholder"])}var k=(0,t.defineComponent)({name:"SchemaFormInput",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const I=(0,s.Z)(k,[["render",y]]);var g=I;function C(e,o,l,n,r,a){const m=(0,t.resolveComponent)("el-radio"),d=(0,t.resolveComponent)("el-radio-group");return(0,t.openBlock)(),(0,t.createBlock)(d,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o)},(0,t.toHandlers)(e.formItem.eventObject)),{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.formItem.options,(e=>((0,t.openBlock)(),(0,t.createBlock)(m,{key:e.value,label:e.value},{default:(0,t.withCtx)((()=>[(0,t.createTextVNode)((0,t.toDisplayString)(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},16,["modelValue"])}var S=(0,t.defineComponent)({name:"SchemaFormRadio",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const w=(0,s.Z)(S,[["render",C]]);var B=w;function x(e,o,l,n,r,a){const m=(0,t.resolveComponent)("el-option"),d=(0,t.resolveComponent)("el-select");return(0,t.openBlock)(),(0,t.createBlock)(d,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o),mode:e.formItem.mode||""},e.formItem.props,(0,t.toHandlers)(e.formItem.eventObject),{style:{width:"100%"}}),{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.formItem.options,(e=>((0,t.openBlock)(),(0,t.createBlock)(m,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:1},16,["modelValue","mode"])}var F=(0,t.defineComponent)({name:"SchemaFormSelect",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const O=(0,s.Z)(F,[["render",x]]);var j=O;function _(e,o,l,n,r,a){const m=(0,t.resolveComponent)("el-switch");return(0,t.openBlock)(),(0,t.createBlock)(m,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o)},e.formItem.props,(0,t.toHandlers)(e.formItem.eventObject)),null,16,["modelValue"])}var P=(0,t.defineComponent)({name:"SchemaFormTextarea",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const U=(0,s.Z)(P,[["render",_]]);var L=U;function N(e,o,l,n,r,a){const m=(0,t.resolveComponent)("el-upload");return(0,t.openBlock)(),(0,t.createBlock)(m,{"file-list":e.fileList,"onUpdate:file-list":o[0]||(o[0]=o=>e.fileList=o),name:"avatar","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,action:e.uploadUrl,"before-upload":e.beforeUpload,headers:e.headers,"on-success":e.handleAvatarSuccess,onChange:e.handleChange},null,8,["file-list","action","before-upload","headers","on-success","onChange"])}var R=(0,t.defineComponent)({name:"SchemaFormFile",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)}),n=(0,t.ref)([]),r=(0,t.ref)(!1),a=(0,t.ref)(""),m=e.formItem.action||"#",d={authorization:localStorage.getItem("token")},c=o=>{e.formItem.change&&e.formItem.change(o.raw)},p=(o,t)=>{e.formItem.success&&e.formItem.success(o,t)},u=o=>{const t=!e.formItem.fileType||o.type.indexOf(e.formItem.fileType)>-1,l=o.size-e.formItem.maxsize;return t&&l&&e.formItem.beforeUpload&&e.formItem.beforeUpload(t,l),t&&l};return{model:l,fileList:n,loading:r,imageUrl:a,uploadUrl:m,handleChange:c,beforeUpload:u,handleAvatarSuccess:p,headers:d}}});const Z=(0,s.Z)(R,[["render",N],["__scopeId","data-v-1d28e8e8"]]);var T=Z;function H(e,o,l,n,r,a){const m=(0,t.resolveComponent)("el-input");return(0,t.openBlock)(),(0,t.createBlock)(m,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o),type:"password"},e.formItem.props,{placeholder:e.formItem.props&&e.formItem.props.placeholder||"请输入"+e.formItem.label,autocomplete:"new-password"},(0,t.toHandlers)(e.formItem.eventObject)),null,16,["modelValue","placeholder"])}var D=(0,t.defineComponent)({name:"SchemaFormInputPassword",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const E=(0,s.Z)(D,[["render",H]]);var M=E;function Y(e,o,l,n,r,a){const m=(0,t.resolveComponent)("el-date-picker");return(0,t.openBlock)(),(0,t.createBlock)(m,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},e.formItem.props,{disabled:e.formItem.disabled||!1,placeholder:e.formItem.props&&e.formItem.props.placeholder||"请选择"+e.formItem.label},(0,t.toHandlers)(e.formItem.eventObject),{style:{width:"100%"}}),null,16,["modelValue","disabled","placeholder"])}var $=(0,t.defineComponent)({name:"SchemaFormInput",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const z=(0,s.Z)($,[["render",Y]]);var q=z;function A(e,o,l,n,r,a){const m=(0,t.resolveComponent)("el-color-picker");return(0,t.openBlock)(),(0,t.createBlock)(m,(0,t.mergeProps)({modelValue:e.model,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model=o),"show-alpha":""},e.formItem.props,(0,t.toHandlers)(e.formItem.eventObject)),null,16,["modelValue"])}var W=(0,t.defineComponent)({name:"SchemaFormInput",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const G=(0,s.Z)(W,[["render",A]]);var J=G;const K=["innerHTML"];function Q(e,o,l,n,r,a){return(0,t.openBlock)(),(0,t.createElementBlock)("div",{innerHTML:e.model},null,8,K)}var X=(0,t.defineComponent)({name:"SchemaFormInput",components:{},props:{formItem:{type:Object,default:()=>({})},modelValue:void 0},emits:["update:modelValue"],setup(e,{emit:o}){const l=(0,t.computed)({get:()=>e.modelValue,set:e=>o("update:modelValue",e)});return{model:l}}});const ee=(0,s.Z)(X,[["render",Q]]);var oe=ee,te={SchemaFormCheckbox:f,SchemaFormInputNumber:b,SchemaFormInput:g,SchemaFormRadio:B,SchemaFormSelect:j,SchemaFormSwitch:L,SchemaFormFile:T,SchemaFormInputPassword:M,SchemaFormDatePicker:q,SchemaFormColorPicker:J,SchemaFormValue:oe},le=(0,t.defineComponent)({name:"SchemaForm",components:{...te},props:{formSchema:{required:!0,type:Object},fields:{type:Object,default:()=>({})}},setup(e){const o=(0,t.ref)(),l=(0,t.getCurrentInstance)(),n=(0,t.reactive)(e.formSchema.formItem.reduce(((e,o)=>(o.eventObject??={},e[o.prop]=o.value||void 0,e)),{}));e.fields&&Object.assign(n,e.fields),e.formSchema.formItem.forEach((async e=>{Object.prototype.hasOwnProperty.call(e,"loading")&&(e.loading=!0),d(e.asyncOptions)||c(e.asyncOptions)?e.options=await e.asyncOptions(e,l).finally((()=>e.loading=!1)):(d(e.asyncValue)||c(e.asyncValue))&&(n[e.field]=await e.asyncValue(e,l).finally((()=>e.loading=!1)))}));const r=(0,t.computed)((()=>e.formSchema.formItem.filter((e=>!e.hidden||(e.hidden instanceof Function?!e.hidden(n):e.hidden))))),a=(0,t.computed)((()=>e.formSchema.rules&&r.value.reduce(((o,t)=>(o[t.prop]=e.formSchema.rules[t.prop],o)),{})||{})),m=["input","select","radio","checkbox","input-number","input-range","switch","file","input-password","date-picker","color-picker","value"],p=e=>m.includes(e)?"schema-form-"+e:(0,t.isReactive)(e)||(0,t.isRef)(e)?(0,t.createVNode)(e):e,u=e=>o.value.validate(e);return{modelRef:n,schemaFormRef:o,rulesRef:a,getComponent:p,schemaItems:r,validate:u}}});const ne=(0,s.Z)(le,[["render",r],["__scopeId","data-v-1d21bd02"]]);var re=ne;const ae={class:"dialog-footer"},me=(0,t.createTextVNode)("取消"),de=(0,t.createTextVNode)("确 定");function ce(e,o,l,n,r,a){const m=(0,t.resolveComponent)("schema-form"),d=(0,t.resolveComponent)("el-button"),c=(0,t.resolveComponent)("el-dialog");return(0,t.openBlock)(),(0,t.createBlock)(c,(0,t.mergeProps)({modelValue:e.visible,"onUpdate:modelValue":o[0]||(o[0]=o=>e.visible=o)},e.$attrs,{title:e.title,width:"60%","before-close":e.remove}),{footer:(0,t.withCtx)((()=>[(0,t.createElementVNode)("span",ae,[(0,t.createVNode)(d,{onClick:e.remove,disabled:e.confirmLoading},{default:(0,t.withCtx)((()=>[me])),_:1},8,["onClick","disabled"]),(0,t.createVNode)(d,{type:"primary",onClick:e.onOk,disabled:e.confirmLoading},{default:(0,t.withCtx)((()=>[de])),_:1},8,["onClick","disabled"])])])),default:(0,t.withCtx)((()=>[(0,t.createVNode)(m,{ref:"dynamicForm",fields:e.fields,"form-schema":e.dynamicValidateForm,style:{"margin-right":"40px"}},null,8,["fields","form-schema"])])),_:1},16,["modelValue","title","before-close"])}var pe=(0,t.defineComponent)({name:"FormDialog",components:{SchemaForm:re},props:{title:{type:String,default:""},remove:{type:Function},formSchema:{type:Object,default:()=>({})},fields:{type:Object,default:()=>({})},handleOk:{type:Function}},setup(e){const o=(0,t.ref)(),l=(0,t.reactive)({visible:!0,confirmLoading:!1,dynamicValidateForm:e.formSchema}),n=()=>{l.confirmLoading=!0,o.value?.validate().then((async()=>{const t=await(e.handleOk&&e.handleOk(o.value?.modelRef,l)).finally((()=>l.confirmLoading=!1));("undefined"==typeof t||t)&&(l.visible=!1)})).catch((()=>{l.confirmLoading=!1}))};return{...(0,t.toRefs)(l),onOk:n,dynamicForm:o}}});const ue=(0,s.Z)(pe,[["render",ce]]);var se=ue;let ie;const fe=e=>{let o;const l=document.createElement("div"),n=()=>{o=null,(0,t.render)(null,l),l.remove()};return o=(0,t.createVNode)(se,{...e,remove:n}),(0,t.nextTick)((()=>{ie&&(o.appContext=ie._instance?.appContext),(0,t.render)(o,l),document.body.appendChild(l)})),o};var ve=fe}(),n}()}));